<div class="discover">
    <div class="row">
        <div class="col-md-12">
            <h3>
                Avisos
            </h3>
            <div class="big grey">
                Últimos avisos del Tecnol&oacute;gico.
            </div>
            <div class="dis-nav button">
                <a href="#" id="Aspirantes">Aspirantes</a>
                <a href="#" id="Alumnos">Alumnos</a>
                <a href="#" id="Egresados">Egresados</a>
                <a href="#" id="Docentes">Docentes</a>
            </div>

            @{
                ITCH2_1.Models.Entities db = new ITCH2_1.Models.Entities();
                List<ITCH2_1.Models.Pages> listaNoticias = new List<ITCH2_1.Models.Pages>();

                //Avisos para Aspirantes
                var noticiasAspirantes = db
                .Categories.FirstOrDefault(categoria => categoria.category_name == "Aspirantes")
                .Pages.Where(pagina => pagina.page_visible == true)
                .OrderByDescending(pag => pag.page_date)
                .Take(3);
                
                //Avisos para Alumnos
                var noticiasAlumnos = db
                .Categories.FirstOrDefault(categoria => categoria.category_name == "Alumnos")
                .Pages.Where(pagina => pagina.page_visible == true)
                .OrderByDescending(pag => pag.page_date)
                .Take(3);

                //Avisos para Egresados
                var noticiasEgresados = db
                .Categories.FirstOrDefault(categoria => categoria.category_name == "Egresados")
                .Pages.Where(pagina => pagina.page_visible == true)
                .OrderByDescending(pag => pag.page_date)
                .Take(3);

                //Avisos para Docentes
                var noticiasDocentes = db
                .Categories.FirstOrDefault(categoria => categoria.category_name == "Docentes")
                .Pages.Where(pagina => pagina.page_visible == true)
                .OrderByDescending(pag => pag.page_date)
                .Take(3);

                listaNoticias.AddRange(noticiasAspirantes);
                listaNoticias.AddRange(noticiasAlumnos);
                listaNoticias.AddRange(noticiasEgresados);
                listaNoticias.AddRange(noticiasDocentes);

                listaNoticias = listaNoticias.Distinct().ToList();
                
            }


            <div class="dis-content">
                @foreach (var item in listaNoticias)
                {
                    string categories = "";
                    item.Categories.ToList().ForEach(action => { categories += "" + action.category_name + " "; });
                    
                    <div class="@categories">
                        <h3>@item.page_title</h3>
                        <i>@item.page_date</i> <i>@categories</i>
                        <p>@item.page_description</p>
                        <a href="@Url.Action("Publicacion", "Contenido", new { id = item.page_id })" class="btn btn-success">Leer m&aacute;s</a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
